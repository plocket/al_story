<!DOCTYPE html>
<html>
<head>
  <title>AL Story Test Generator</title>
  <style type="text/css">

    * {
      width: 100%;
      box-sizing: border-box;
      margin: .2em 0;
    }

    body {
      padding: .3em 1em;
      font-family: Helvetica;
      text-align: center;
    }

    p {
      margin: 0 0 0.3em 0;
    }

    button {
      width: 15em;
      height: 2.5em;
    }

    header {
      background-color: #57c372;
      max-width: 600px;
      margin: 0 auto;
      border-radius: 5px;
      position: relative;
      z-index: 1;
    }

    /* Border outlines interfere with icon */
    header:before {
      background-color: #57c372;
      content: "";
      position: absolute;
      z-index: -1;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      /* border: 2px solid #000000; */
      border-radius: 5px;
    }

    header:after {
      background-color: #57c372;
      content: "";
      position: absolute;
      z-index: -1;
      top: .5em;
      left: .5em;
      right: .5em;
      bottom: .5em;
      /* border: 2px solid #000000; */
      border-radius: 5px;
    }


    header, header * {
      width: unset;
      position: relative;
    }

    header h2 {
      padding: 1em;
    }

    header .icon {
      height: 6em;
      position: absolute;
      top: -2em;
      right: -5em;
    }

    section {
      position: relative;
      background-color: #daeedf;
      border: 1px solid gray;
      border-radius: 5px;
      margin: 0 auto;
      margin-bottom: 1em;
      padding: .5em 1em;
      max-width: 600px;
      text-align: left;
    }

    .icon.small {
      width: 1.2em;
      display: inline;
      position: relative;
      top: .5em;
      margin: 0;
    }

    #resources {
      background-color: unset;
      border: unset;
      padding: 0;
    }

    #feature, #scenario {
      background-color: #f3fff6;
      font-family: monospace;
      border: 1px solid gray;
      border-radius: 5px;
      padding: 0.5em;
      margin-bottom: 1em;
    }

    #auto_ignored_keys_only {
      font-family: monospace;
    }

    .togglee {
      overflow: hidden;
      height: 0;
    }

    .expanded {
      height: fit-content;
      transition: height 70ms ease-out;
    }

    .message {
      position: absolute;
      top: -1em;
      left: 0;
    }

    .error_output {
      color: red;
    }

    .ok {
      display: none;
    }

    .error {
      display: block;
      color: red;
    }

    label, input {
      display: inline-block;
      width: fit-content;
    }

    #ignore_anywhere_container { position: relative; }

  </style>
</head>
<body>
  <header>
    <h2><span>AL Story Test Generator<img class="icon" src="noun_dough_3639378.svg"></span></h2>
  </header>

  <section id="resources">
    <p><img src="noun_Book_3716540.svg" class="icon small"><span>&nbsp;&nbsp;</span><a href="https://docs.google.com/document/d/1hkNr78mrU3Ha98tPUL4OKWi3eNnt-1Sba7L8470u06g/edit">Documentation for testing library</a></p>
    <p><img src="noun_Error_3671601.svg" class="icon small">&nbsp;&nbsp;<span>Error? </span><a href="https://jsonlint.com/?code=">Use JSON validator</a></p>  
  </section>

  <section id="data_container">
    <p id="da_data_warning" class="ok message">Something is wrong with the data. See error below.</p>
      <!-- and/or try <a href='https://javascriptvalidator.net/'>a js validator</a>.</p> -->
    <p>Paste your docassemble variable data into this text box:</p>
    <textarea id="da_data" placeholder="Paste data here" rows="4"></textarea>
    <div class="error_output"></div>
  </section>

  <section id="ignore_lists_container">
    <!-- and/or try <a href='https://javascriptvalidator.net/'>a js validator</a>.</p> -->

    <button class="toggler" for="options_container">▼ Edit test options</button>
    <div id="options_container" class="togglee collapsed">
      <div>
        <label for="yaml_file_name">Name of the interview's YAML file:</label>
        <input id="yaml_file_name" type="text" name="yaml_file_name" value="no_extension_just_name">
      </div>

      <div>
        <label for="question_id">Final question id:</label>
        <input id="question_id" type="text" name="question_id" value="a question id">
      </div>

      <div>
        <label for="num_signatures">How many people sign?</label>
        <input type="number" name="num_signatures" id="num_signatures" value="0">  
      </div>
    </div>

    <button class="toggler" for="ignore_container">▼ Edit ignored variables</button>
    <div id="ignore_container" class="togglee collapsed">

      <p>Automatically ignored:</p>
      <p id="auto_ignored_keys_only"></p>
      <br>

      <!-- Why offer them this fine-grained detail till we know it's needed? -->
      <!-- <div id="ignore_keys"></div> -->
      
      <div id="ignore_anywhere_container" display="none">
        <p id="ignore_warning" class="ok message">Something is wrong with the list. Will use default values. See bottom.</p>
        <p>Add or edit words to ignore in the keys of variables:</p>
        <button id="reset_ignore">ⓧ Reset</button> 
        <textarea id="ignore_anywhere" name="" cols="" rows=""></textarea> 
      </div>
    <div class="error_output"></div>
    </div>
  </section>
  

  <section id="output_container">
    <p>If you're starting with a blank <code>.feature</code> file, paste this into your file:</p>
    <button id="copy_feature">Copy</button>
    <div id="feature">Feature: Description of broad purpose for all scenarios in here</div>

    <div>Once the test has been generated, tap 'copy' and paste it into your <code>.feature</code> file</div>
    <button id="copy_scenario">Copy</button>
    <div id="scenario"></div>
  </section>

  <script type="text/javascript" src="generate.js"></script>
</body>
</html>